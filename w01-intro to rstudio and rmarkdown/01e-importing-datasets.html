<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Importing Datasets</title>
    <meta charset="utf-8" />
    <meta name="author" content="Alma Castro, Cypress College" />
    <script src="01e-importing-datasets_files/header-attrs-2.29/header-attrs.js"></script>
    <link rel="stylesheet" href="slide-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: title-slide





&lt;br&gt;
&lt;br&gt;
.right-panel[ 

# Importing Datasets
## Alma Castro, Cypress College
]


---

class:inverse middle

.font75[Importing Datasets]

---

## Setting Working Directory

Set working directory first to the folder where you have the dataset saved. 

- You can see your current RStudio working directory by running the function `getwd()`.

Once you know the working directory, you can leave as is or set it to what you want it to be:

- Go to "Session", then "Set Working Directory", then "Choose Directory".

If this still gives you an error that it cannot find the file, then you will also have to set the working directory for the `R Markdown` file. 

- Click on the drop down arrow next to "knit" icon, then "Knit Directory", then "Current Working Directory".

---

## Importing datasers with `read.csv()` from base R

The base R function `read.csv("dataset_file_name")` will import a csv file. Hence the dataset has to be saved under a .csv format. 

If names of variables have spaces, the function will plut a "." in place of the space. However, this does not follow tidyverse style: lower case with words separated by an underscore `_`. Hence you would have to take further steps to clean the data so that it fits tidyverse style. 

If the name of the dataset is long or you would like to change the name then you can assign it to your desired name. 

`data &lt;- read.csv("dataset_file_name")`


---

### Example


``` r
lapd &lt;- read.csv("Police_Payroll.csv")
glimpse(lapd)
```

```
## Rows: 68,564
## Columns: 35
## $ Row.ID                       &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu", "…
## $ Year                         &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013,…
## $ Department.Title             &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Police…
## $ Payroll.Department           &lt;int&gt; 4301, 4302, 4301, 4301, 4302, 4302, 4301,…
## $ Record.Number                &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 10002…
## $ Job.Class.Title              &lt;chr&gt; "Police Detective II", "Clerk Typist", "P…
## $ Employment.Type              &lt;chr&gt; "Full Time", "Full Time", "Full Time", "F…
## $ Hourly.or.Event.Rate         &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.42,…
## $ Projected.Annual.Salary      &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.24…
## $ Q1.Payments                  &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20, 2…
## $ Q2.Payments                  &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20, 2…
## $ Q3.Payments                  &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81, 2…
## $ Q4.Payments                  &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03, 2…
## $ Payments.Over.Base.Pay       &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 137…
## $ X..Over.Base.Pay             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
## $ Total.Payments               &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.24…
## $ Base.Pay                     &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.71…
## $ Permanent.Bonus.Pay          &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, 0.…
## $ Longevity.Bonus.Pay          &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 1726.…
## $ Temporary.Bonus.Pay          &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00, …
## $ Lump.Sum.Pay                 &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.00,…
## $ Overtime.Pay                 &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.00,…
## $ Other.Pay...Adjustments      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.80…
## $ Other.Pay..Payroll.Explorer. &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 1376.…
## $ MOU                          &lt;int&gt; 24, 3, 24, 24, 12, 3, 24, 24, 24, 24, 24,…
## $ MOU.Title                    &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT", …
## $ FMS.Department               &lt;int&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 7…
## $ Job.Class                    &lt;int&gt; 2223, 1358, 2227, 2232, 1839, 2207, 2214,…
## $ Pay.Grade                    &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1", "…
## $ Average.Health.Cost          &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40, 1…
## $ Average.Dental.Cost          &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24, 4…
## $ Average.Basic.Life           &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 11.…
## $ Average.Benefit.Cost         &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52, 1…
## $ Benefits.Plan                &lt;chr&gt; "Police", "City", "Police", "Police", "Ci…
## $ Job.Class.Link               &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pdf"…
```

---

## Importing datasets with `read_csv()` from tidyverse

A more common function when using tidyverse packages and style is `read_csv()`. However, this function does not clean the variable names. It simply adds `' '` to the names.

---

### Example


``` r
lapd &lt;- read_csv("Police_Payroll.csv")
glimpse(lapd)
```

```
## Rows: 68,564
## Columns: 35
## $ `Row ID`                       &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu",…
## $ Year                           &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 201…
## $ `Department Title`             &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Poli…
## $ `Payroll Department`           &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 430…
## $ `Record Number`                &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 100…
## $ `Job Class Title`              &lt;chr&gt; "Police Detective II", "Clerk Typist", …
## $ `Employment Type`              &lt;chr&gt; "Full Time", "Full Time", "Full Time", …
## $ `Hourly or Event Rate`         &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.4…
## $ `Projected Annual Salary`      &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.…
## $ `Q1 Payments`                  &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20,…
## $ `Q2 Payments`                  &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20,…
## $ `Q3 Payments`                  &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81,…
## $ `Q4 Payments`                  &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03,…
## $ `Payments Over Base Pay`       &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1…
## $ `% Over Base Pay`              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ `Total Payments`               &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.…
## $ `Base Pay`                     &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.…
## $ `Permanent Bonus Pay`          &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, …
## $ `Longevity Bonus Pay`          &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 172…
## $ `Temporary Bonus Pay`          &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00…
## $ `Lump Sum Pay`                 &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.0…
## $ `Overtime Pay`                 &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.0…
## $ `Other Pay &amp; Adjustments`      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.…
## $ `Other Pay (Payroll Explorer)` &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 137…
## $ MOU                            &lt;chr&gt; "24", "3", "24", "24", "12", "3", "24",…
## $ `MOU Title`                    &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT"…
## $ `FMS Department`               &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70,…
## $ `Job Class`                    &lt;chr&gt; "2223", "1358", "2227", "2232", "1839",…
## $ `Pay Grade`                    &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1",…
## $ `Average Health Cost`          &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40,…
## $ `Average Dental Cost`          &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24,…
## $ `Average Basic Life`           &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 1…
## $ `Average Benefit Cost`         &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52,…
## $ `Benefits Plan`                &lt;chr&gt; "Police", "City", "Police", "Police", "…
## $ `Job Class Link`               &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pd…
```

---

We will learn how to clean variable names and data in future topics.


``` r
library(janitor)
lapd &lt;- clean_names(lapd)
glimpse(lapd)
```

```
## Rows: 68,564
## Columns: 35
## $ row_id                     &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu", "3-…
## $ year                       &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ department_title           &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Police (…
## $ payroll_department         &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 4301, 4…
## $ record_number              &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 1000232…
## $ job_class_title            &lt;chr&gt; "Police Detective II", "Clerk Typist", "Pol…
## $ employment_type            &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Ful…
## $ hourly_or_event_rate       &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.42, 4…
## $ projected_annual_salary    &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.24, …
## $ q1_payments                &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20, 208…
## $ q2_payments                &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20, 241…
## $ q3_payments                &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81, 215…
## $ q4_payments                &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03, 252…
## $ payments_over_base_pay     &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1376.…
## $ percent_over_base_pay      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ total_payments             &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.24, …
## $ base_pay                   &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.71, …
## $ permanent_bonus_pay        &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, 0.00…
## $ longevity_bonus_pay        &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 1726.16…
## $ temporary_bonus_pay        &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00, 68…
## $ lump_sum_pay               &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.00, 0…
## $ overtime_pay               &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.00, 4…
## $ other_pay_adjustments      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.80, …
## $ other_pay_payroll_explorer &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 1376.19…
## $ mou                        &lt;chr&gt; "24", "3", "24", "24", "12", "3", "24", "24…
## $ mou_title                  &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT", "P…
## $ fms_department             &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70,…
## $ job_class                  &lt;chr&gt; "2223", "1358", "2227", "2232", "1839", "22…
## $ pay_grade                  &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1", "B"…
## $ average_health_cost        &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40, 107…
## $ average_dental_cost        &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24, 405…
## $ average_basic_life         &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 11.40…
## $ average_benefit_cost       &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52, 111…
## $ benefits_plan              &lt;chr&gt; "Police", "City", "Police", "Police", "City…
## $ job_class_link             &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pdf", …
```

---

### Using variables within the imported dataset
  
In order to work with variables from the dataset, we must tell R what dataset the variable is from by using `dataset_name$variable`.

Or we can use the code `attach(dataset_name)` to set the dataset as our working dataset and be able to use the variables without having to recall the dataset every time.  

---


### Example

.pull-left[
Option 1


``` r
mean(lapd$projected_annual_salary)
```

```
## [1] 98005.26
```
]

.pull-right[
Option 2


``` r
attach(lapd)
mean(projected_annual_salary)
```

```
## [1] 98005.26
```
]




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "pygments",
"highlightLines": true,
"highlightLanguage": "r"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
